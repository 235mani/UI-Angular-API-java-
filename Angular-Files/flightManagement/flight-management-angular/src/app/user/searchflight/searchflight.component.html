<app-user-navbar></app-user-navbar>
<nav class="navbar sticky-top bg-light" style="z-index:1;">
    <div class="container-fluid d-flex justify-content-evenly">
        <form class="d-flex justify-content-evenly" role="search" [formGroup]="validation">
            <div class="form-floating">
                <mat-select [(ngModel)]="selectedTripType" formControlName="tripType" class="form-control"
                    disableOptionCentering>
                    <mat-option value='1'>One Way</mat-option>
                    <mat-option value='2'>Round Trip</mat-option>
                </mat-select>
                <label for="floatingInput">Trip Type</label>
            </div>
            <div class="form-floating">
                <mat-select name="" id="" formControlName="flyFrom" class="form-control"
                    [ngStyle]="{'border-color' : isValidationError('flyFrom') ? 'red' : '#ced4da' }"
                    disableOptionCentering>
                    <mat-option *ngFor="let fromCity of cities" [value]="fromCity.cityId">
                        {{fromCity.cityName + " ( " + fromCity.cityShortName + " )"}}
                    </mat-option>
                </mat-select>
                <label for="floatingInput">From</label>
            </div>

            <div style="margin:auto;" (click)="swapFromAndTo()">
                <button class="btn" style="outline: none !important;"><i class="bi bi-arrow-left-right"></i></button>
            </div>
            <div class="form-floating">
                <mat-select name="" id="" formControlName="flyTo" class="form-control"
                    [ngStyle]="{'border-color' : isValidationError('flyTo') ? 'red' : '#ced4da' }"
                    disableOptionCentering>
                    <mat-option *ngFor="let fromCity of cities" [value]="fromCity.cityId">
                        {{fromCity.cityName + " ( " + fromCity.cityShortName + " )"}}
                    </mat-option>
                </mat-select>
                <label for="floatingInput">To</label>
            </div>

            <div class="form-floating">
                <input matInput [matDatepicker]="picker" class="form-control" formControlName="startDate"
                    (click)="picker.open()" readonly="true">
                <mat-datepicker #picker></mat-datepicker>
                <label for="floatingInput">Departure Date</label>
            </div>
            <div class="form-floating" *ngIf="selectedTripType == '2'">
                <input matInput [matDatepicker]="pickerReturn" class="form-control" formControlName="returnDate"
                    (click)="pickerReturn.open()" readonly="true">
                <mat-datepicker #pickerReturn></mat-datepicker>
                <label for="floatingInput">Return Date</label>
            </div>
            <div class="form-floating">
                <button class="btn btn-outline-success" type="submit"
                    (click)="searchFlight()">{{searchButtonName}}</button>
            </div>
            <!-- <div class="form-floating" style="margin: auto;margin-left: 30px;" *ngIf="searched">
                <button class="btn btn-outline-success" type="submit" (click)="getFlights()">Clear Search</button>
            </div> -->
        </form>
    </div>
</nav>
<div style="display:flex;" *ngIf="searchedTripType == '2'">
    <div style="width:50%;text-align:center;border-bottom: 1px solid black;padding:20px 0px;" class="container-fluid">
        <!-- Departure  -->
            <span style="font-size:20px;">
                {{searchedFromCityName}} 
                <i class="bi bi-arrow-right"></i>
                {{searchedToCityName}}
            </span> &nbsp;
            <span style="font-weight:500;">
                {{searchPayload.startDate | date : 'EEE, d MMM'}}
            </span>
    </div>
    <div style="width:50%;text-align:center;border-bottom: 1px solid black;padding:20px 0px;" class="container-fluid">
        <!-- Return  -->
            <span style="font-size:20px;">
                {{searchedToCityName}}
                <i class="bi bi-arrow-right"></i>
                {{searchedFromCityName}} 
            </span> &nbsp;
            <span style="font-weight:500;">
                {{searchPayload.returnDate | date : 'EEE, d MMM'}}
            </span>
    </div>
</div>
<div style="display:flex;" class="container-fluid" *ngIf="searchedTripType == '2'">
    <app-display-card [flightDetails]="oneWayFlightDetails" tripType="departure" style="width:50%;overflow: scroll;height: 430px;">
    </app-display-card>
    <app-display-card [flightDetails]="twoWayFlightDetails" tripType="return" style="width:50%;overflow: scroll;height: 430px;">
    </app-display-card>
</div>
<app-display-card [flightDetails]="oneWayFlightDetails" *ngIf="searchedTripType == '1'"></app-display-card>